var dataArray = [
    {
        id: 0,
        image: "opioid",
        title: "Opioid Education Outreach in San Bernardino",
        background: "The ongoing opioid epidemic presents considerable challenges in communities like San Bernardino, particularly impacting those with limited English proficiency, non-native English speakers, and individuals for whom English is a second language. Addressing barriers to accurate information access is vital to empower these populations, enhance education about opioids, and ultimately reduce misuse while improving patient outcomes.", 
        description: "Interns will play a crucial role in conducting community outreach, developing educational materials, and administering surveys to gather baseline data, contributing to a comprehensive project aimed at raising awareness of opioid use and abuse in San Bernardino.",
        rawText: "[{|Innovative Educational Materials|: The interns will be actively involved in creating impactful educational materials, such as infographics, short papers, or videos, specifically designed to engage individuals struggling with opioid addiction.} {|Community Outreach and Surveys|: The intern cohort will play a pivotal role in conducting community outreach, distributing the educational materials, and administering initial surveys to gather baseline data on substance abuse within the targeted populations.} {|Project Timeline and Follow-up|: The project will unfold in phases, starting with outreach to identify educational needs, followed by material development, and concluding with dispersal efforts. The interns will also engage in follow-up outreach to study participants, measuring quantitative improvements for statistical significance.}]"
    },
    {
        id: 1,
        image: "inter",
        title: "Digital Intervention Platform for Opioid Addiction",
        background: "In response to the pressing challenges of opioid addiction, particularly in unhoused and uninsured communities, there is a need for innovative, tech-enabled solutions to aid in the recovery process. The impact of addiction extends across diverse socioeconomic backgrounds, making it imperative to address these challenges with a focus on inclusivity. Through the development of a supportive platform, this initiative strives to provide continuous assistance, resources, and a sense of community for individuals in recovery.", 
        description: "Interns will be instrumental in developing a comprehensive digital intervention platform focused on aiding individuals in their recovery from opioid addiction. The platform will serve as a user-friendly, accessible resource offering various features, including:",
        rawText: "[{|Education Modules|: Interactive modules providing information on the science of addiction, the impact on the brain, and strategies for recovery.} {|Progress Tracking|: Tools to track and celebrate milestones in recovery, encouraging ongoing engagement.} {|Resource Hub|: Access to local treatment centers, support services, and mental health resources.}]<INTERN ENGAGEMENT> [{ |Designing the platform|: Contributing to the user interface and experience design to ensure accessibility and engagement.} { |Creating content|: Developing informative and engaging content for the education modules and resource hub.} { |Testing usability|: Conducting thorough testing to ensure the platform is user-friendly and meets the diverse needs of its audience} { |Devising and implementing effective outreach strategies|: promoting the platform within the affected communities, ensuring maximum impact and utilization.}]"
    },
    {
        id: 2,
        image: "advo",
        title: "Policy Advocacy for Substance Abuse Treatment ",
        background: "Recognizing the entrenched systemic barriers hindering access to substance abuse treatment, there is an urgent need for policy changes that enhance both affordability and accessibility.", 
        description: "Embark on a dynamic policy advocacy project dedicated to improving substance abuse treatment accessibility. Key tasks encompass:",
        rawText: "[{ |Policy Analysis|: Thoroughly research and analyze existing state and federal policies pertaining to substance abuse treatment, identifying critical areas for enhancement.} { |Stakeholder Engagement|: Establish collaborative partnerships by reaching out to advocacy groups, healthcare professionals, and policymakers, creating a robust coalition supporting enhanced accessibility.} { |Legislative Recommendations|: Craft tangible and actionable legislative recommendations aimed at addressing identified gaps within substance abuse treatment policy.} { |Community Awareness Campaign|: Spearhead the creation of impactful materials and events designed to raise awareness about the significance of policy changes, fostering community support for this crucial initiative.}] <INTERN ENGAGEMENT> [{ |Research|: Fostering a deep understanding of the policy landscape and identifying potential areas for improvement, ultimately equipped with the knowledge essential for effective advocacy.} { |Communication|: Developing and implementing effective communication strategies. This involves forging connections with advocacy groups, healthcare professionals, and policymakers to build a strong and supportive coalition. Interns play a pivotal role in amplifying the advocacy message.} { |Community engagement|: Leverage unique skills to create materials and organize events that resonate with diverse audiences. Interns become ambassadors, engaging communities and driving awareness about the importance of policy changes.}]"
    },
    {
        id: 3,
        image: "tele",
        title: "Telehealth Expansion for Addiction Treatment",
        background: "The Telehealth Expansion for Addiction Treatment project stems from a critical need to address pervasive barriers hindering access to addiction treatment, particularly in rural or underserved areas. The existing landscape reveals a stark reality where geographical remoteness and limited healthcare infrastructure converge to create significant hurdles for individuals seeking addiction treatment.", 
        description: "Develop and implement a project to expand telehealth services for addiction treatment, including:",
        rawText: "[{ |Needs Assessment|: Identify regions with limited access to addiction treatment services and assess their telehealth infrastructure.} { |Partnerships|: Collaborate with healthcare providers, insurers, and telehealth platforms to establish and promote telehealth services for addiction treatment.} { |User-Friendly Resources|: Create educational materials to guide individuals through the process of accessing addiction treatment through telehealth.} { |Research, Outreach, and Resource Development|: Involved in multifaceted roles, encompassing thorough research, targeted outreach efforts, and the development of resources. Collective efforts aim to support individuals seeking addiction treatment through telehealth, addressing unique challenges in rural or underserved areas.}]"
    },
    {
        id: 4,
        image: "lit",
        title: "Children’s Neurologic Literature",
        background: "Address barriers to accessing addiction treatment by expanding telehealth services, especially in rural or underserved areas.", 
        description: "Construct and create empathetic and educational children’s books tailored towards those facing various neurodegenerative diseases including ADHD, dyslexia, and epilepsy. With a team of other interns, you will collaborate on various literary projects with the overarching goals of: ",
        rawText: "[{ |Empathy and Understanding|: Foster empathy and understanding towards children dealing with neurodegenerative disease and their families.} { |Awareness and Education|: Raise awareness about various neurological diseases and the specific needs of affected individuals while advocating for inclusivity and support within communities and healthcare systems.} { |Positive Emotional Impact|: Bring joy, comfort, and moments of happiness to youth facing challenging circumstances through uplifting and inspiring stories.}] Note for Spring 2024, the Children’s Neurologic Literature Project is only accepting novel illustrations from the new cohort."
    },
    {
        id: 5,
        image: "lang",
        title: "Second Medical Language Exchange",
        background: "Within the landscape of healthcare, a significant impediment to equitable access and quality of care is the documented dearth of educational materials available in languages diverse from the predominant ones. This discrepancy serves as a formidable barrier, perpetuating disparities across chronic health management, treatments, and overall healthcare outcomes. The challenges are profound: language disparities, cultural sensitivity, impact on health outcomes, and age and cultural considerations.", 
        description: "This initiative aims to bridge the existing gap between medical professionals and Limited English Proficiency (LEP) populations by creating culturally sensitive and linguistically tailored educational materials. The project's objectives extend beyond merely generating new materials; it aspires to enhance existing resources and investigate how these improvements can positively impact healthcare outcomes for LEP populations. The key objectives include:",
        rawText: "[{ |Material Development|: Craft educational materials that resonate with diverse linguistic and cultural backgrounds. These materials will not only address current gaps but will also be designed to improve understanding and engagement between medical professionals and LEP populations.} { |Outcome Evaluation|: Conduct a comprehensive study to assess how the improved and new educational materials contribute to enhanced healthcare outcomes for LEP populations. This evaluation will provide valuable insights into the efficacy of culturally sensitive resources.} { |Cultural and Age Considerations|: Explore the nuanced dynamics of culture and age in educational material effectiveness. This involves understanding how different cultural contexts and age groups respond to healthcare information, enabling the establishment of general guidelines for creating universally effective educational materials.} { |Guideline Establishment|: Based on the study's findings, establish general guidelines for creating educational materials that are optimally effective for both medical professionals and LEP populations. These guidelines will serve as a resource for future initiatives aimed at promoting healthcare equity and access.}]"
    },

];

var parentElement = document.getElementById('projectCardHolder');

function processText(text) {
    text = text.replace(/\<(.*?)\>/g, '<b id="projectSubHeader">$1</b><br>');
    
    text = text.replace(/\[\{(.*?)\}\]/g, function(match, items) {
        var listItems = items.split('} {').map(item => '<li>' + item + '</li>').join('');
        return '<ul>' + listItems + '</ul>';
    });

    text = text.replace(/\|(.*?)\|/g, '<strong>$1</strong>');

    return text;
}

function populateDiv(mobile){
    parentElement.innerHTML = '';
    var funcName = "expand"
    var imgName = ""

    dataArray.forEach(item => {
        if(mobile){
            funcName = "showModal"
            imgName = "stretched/" + item.image
        } else{
            imgName = item.image
        }

        var htmlContent = 
        `
            <div class="project-card">
                <img class="projectImage" src="assets/image/projects/${imgName}.jpg" alt="Project ${item.id} Title">
                <div class="project-content">
                    <h2 id="noselect">${item.title}</h2>
                    <p id="projectP">
                        <div class="collapse" id="noselect">
                            <b id ="projectSubHeader">BACKGROUND</b></br>
                            ${item.background}</p>
                            
                            <b id ="projectSubHeader">DESCRIPTION</b></br>
                            ${item.description}</p>

                            ${processText(item.rawText)}
                        </div>
    
                        <div id="myModal${item.id}" class="modal" onclick="closeModal(${item.id}, event)">
                            <div class="modal-content">
                            <span id="closeModal${item.id}" class="close">&times;</span>
                            <h2 id="noselect">${item.title}</h2>
                            <p id="projectP" class="noselect">
                                <b id ="projectSubHeader">BACKGROUND</b></br>
                                ${item.background}</p>
                                <b id ="projectSubHeader">DESCRIPTION</b></br>
                                ${item.description}</p>

                                <div class="noselect">
                                    ${processText(item.rawText)}
                                </div>
                            </p>
                            </div>
                        </div>
    
                        <button id="toggleContentBtn${item.id}" onclick="${funcName}('${item.id}')" class="seeMoreBtn">See More</button>
                    </p>
                </div>
            </div>
        `;
        parentElement.insertAdjacentHTML('beforeend', htmlContent);
    });
}

function expand(itemId) {
    const showMoreBtn = document.getElementById('toggleContentBtn' + itemId);
    const contentDiv = showMoreBtn.parentNode.childNodes[4];

    if (contentDiv.style.maxHeight === '220px' || contentDiv.style.maxHeight === '') {
        contentDiv.style.maxHeight = '1000px';
        contentDiv.classList.add('no-gradient');
        showMoreBtn.innerHTML = 'See Less';
    } else {
        // If content is expanded, collapse it
        contentDiv.style.maxHeight = '220px';
        contentDiv.classList.remove('no-gradient');
        // Change the button text back to "See More"
        showMoreBtn.innerHTML = 'See More';
    }
}

function showModal(itemId){
    const modal = document.getElementById('myModal' + itemId);
    modal.style.display = "block";
}

function closeModal(itemId, event){
    const modal = document.getElementById('myModal' + itemId);
    const closeBtn = document.getElementById('closeModal' + itemId);
    
    if (event.target === modal || event.target === closeBtn) {
        modal.style.display = "none";
    }
}

function fitContent(){
    const viewportWidth = window.innerWidth || document.documentElement.clientWidth;

    mobile = (viewportWidth) < 750;
    populateDiv(mobile);
}

document.addEventListener('copy', (event) => {
    event.clipboardData.setData('text/plain', '');
    event.preventDefault(); // This prevents the default copy functionality.
});

document.addEventListener("DOMContentLoaded", fitContent);
window.addEventListener("resize", fitContent);